<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relief Locator with Map</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css">
</head>
<body>
    <div class="container">
        <h1>Relief and Help Locator</h1>
        <button id="shareLocationBtn">Share My Location</button>
        <div id="map"></div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Relief locations mock data
const reliefLocations = [
    { name: 'taunggyi Center 1 phone 09458549137', latitude: 20.773372, longitude: 96.945820, },
    { name: 'yangon Center 2 phone 09458549137', latitude: 16.855966, longitude: 96.217181, },
    { name: 'mandalay Center 3 phone 09458549137', latitude: 21.930087, longitude: 96.101893, }
];

// Initialize the map
const map = L.map('map').setView([20.0, 0.0], 2); // Centered on the world

// Add OpenStreetMap tiles
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 18,
    attribution: 'Â© OpenStreetMap contributors'
}).addTo(map);

// Function to show user's location
function showUserLocation(lat, lng) {
    L.marker([lat, lng])
        .addTo(map)
        .bindPopup('<b>Your Location</b>')
        .openPopup();
    map.setView([lat, lng], 10); // Zoom to user's location
}

// Display relief locations on the map
function displayReliefLocations() {
    reliefLocations.forEach(location => {
        L.marker([location.latitude, location.longitude])
            .addTo(map)
            .bindPopup(`<b>${location.name}</b><br>Latitude: ${location.latitude}<br>Longitude: ${location.longitude}`);
    });
}

document.getElementById('shareLocationBtn').addEventListener('click', () => {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(position => {
            const userLatitude = position.coords.latitude;
            const userLongitude = position.coords.longitude;
            showUserLocation(userLatitude, userLongitude);
            displayReliefLocations();
        }, handleError);
    } else {
        alert('Geolocation is not supported by this browser.');
    }
});

function handleError(error) {
    switch (error.code) {
        case error.PERMISSION_DENIED:
            alert("User denied the request for Geolocation.");
            break;
        case error.POSITION_UNAVAILABLE:
            alert("Location information is unavailable.");
            break;
        case error.TIMEOUT:
            alert("The request to get user location timed out.");
            break;
        case error.UNKNOWN_ERROR:
            alert("An unknown error occurred.");
            break;
    }
}

    </script>
</body>
<style>
    body {
    font-family: Arial, sans-serif;
    background-color: #f0f0f0;
    margin: 0;
    padding: 0;
}

.container {
    max-width: 800px;
    margin: 50px auto;
    padding: 20px;
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

h1 {
    text-align: center;
}

button {
    display: block;
    margin: 20px auto;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
}

#map {
    width: 100%;
    height: 500px;
    margin-top: 20px;
    border-radius: 8px;
}

</style>
</html>
